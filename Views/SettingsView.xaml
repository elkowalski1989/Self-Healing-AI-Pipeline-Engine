<UserControl x:Class="SelfHealingPipeline.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Settings" FontSize="20" FontWeight="SemiBold"
                   Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,16"/>

        <Border Grid.Row="1" CornerRadius="12" Background="{DynamicResource SurfaceBrush}" Padding="20">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel MaxWidth="500">
                    <!-- Claude CLI Path -->
                    <TextBlock Text="CLAUDE CLI" FontSize="10" FontWeight="Bold"
                               Foreground="{DynamicResource TextMutedBrush}" Margin="0,0,0,10"/>

                    <TextBlock Text="Claude CLI Path" FontSize="11"
                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,3"/>
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="ClaudePathBox" Grid.Column="0" FontSize="12" Padding="8,6"
                                 Text="claude"
                                 FontFamily="Cascadia Code,Consolas"
                                 Background="{DynamicResource InputBrush}"
                                 Foreground="{DynamicResource TextPrimaryBrush}"
                                 BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"/>
                        <Button x:Name="BrowseClaudeButton" Grid.Column="1" Margin="6,0,0,0"
                                Padding="10,6" Cursor="Hand" BorderThickness="0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="Bd" Background="{DynamicResource CardBrush}"
                                            CornerRadius="6" Padding="{TemplateBinding Padding}"
                                            BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}">
                                        <TextBlock Text="Browse" FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource CardHoverBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                    <TextBlock Text="Path to the Claude Code CLI executable. Default: 'claude' (uses PATH). Example: C:\Users\...\AppData\Local\Programs\claude\claude.exe"
                               FontSize="10" Foreground="{DynamicResource TextMutedBrush}" Margin="0,0,0,16"
                               TextWrapping="Wrap"/>

                    <Button x:Name="TestClaudeButton" Padding="12,6" Cursor="Hand" BorderThickness="0"
                            HorizontalAlignment="Left" Margin="0,0,0,4">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="Bd" Background="{DynamicResource CardBrush}"
                                        CornerRadius="6" Padding="{TemplateBinding Padding}"
                                        BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}">
                                    <TextBlock Text="Test Connection" FontSize="11" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Bd" Property="Background" Value="{DynamicResource CardHoverBrush}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock x:Name="TestResultText" FontSize="11" Margin="0,4,0,0"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>

                    <!-- Separator -->
                    <Border Height="1" Background="{DynamicResource BorderBrush}" Margin="0,20,0,20"/>

                    <!-- Defaults -->
                    <TextBlock Text="PIPELINE DEFAULTS" FontSize="10" FontWeight="Bold"
                               Foreground="{DynamicResource TextMutedBrush}" Margin="0,0,0,10"/>

                    <TextBlock Text="Default Max Iterations (0 = unlimited)" FontSize="11"
                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,3"/>
                    <TextBox x:Name="DefaultMaxIterBox" FontSize="12" Padding="8,6" Width="80"
                             HorizontalAlignment="Left" Text="5"
                             Background="{DynamicResource InputBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                             Margin="0,0,0,12"/>

                    <TextBlock Text="Default Step Timeout — max time per step (seconds)" FontSize="11"
                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,3"/>
                    <TextBox x:Name="DefaultTimeoutBox" FontSize="12" Padding="8,6" Width="80"
                             HorizontalAlignment="Left" Text="120"
                             Background="{DynamicResource InputBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                             Margin="0,0,0,12"/>

                    <TextBlock Text="Claude Max Turns — how many attempts Claude gets per healing round" FontSize="11"
                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,3"/>
                    <TextBox x:Name="MaxTurnsBox" FontSize="12" Padding="8,6" Width="80"
                             HorizontalAlignment="Left" Text="20"
                             Background="{DynamicResource InputBrush}"
                             Foreground="{DynamicResource TextPrimaryBrush}"
                             BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                             Margin="0,0,0,20"/>

                    <!-- Save -->
                    <Button x:Name="SaveSettingsButton" Padding="16,8" Cursor="Hand" BorderThickness="0"
                            HorizontalAlignment="Left">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="Bd" Background="{StaticResource AccentBrush}"
                                        CornerRadius="8" Padding="{TemplateBinding Padding}">
                                    <TextBlock Text="Save Settings" Foreground="White" FontSize="12" FontWeight="SemiBold"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Bd" Property="Background" Value="{StaticResource AccentHoverBrush}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
