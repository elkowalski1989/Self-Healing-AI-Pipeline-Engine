<UserControl x:Class="SelfHealingPipeline.Controls.StepCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="Root" Cursor="Hand" AllowDrop="True">
    <Border x:Name="CardBorder" CornerRadius="8" Padding="12,10" Margin="0,0,0,6"
            Background="{DynamicResource CardBrush}"
            BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
        <Border.Style>
            <Style TargetType="Border">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{DynamicResource CardHoverBrush}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Drag handle -->
            <TextBlock Grid.Column="0" Text="â ¿" FontSize="16" VerticalAlignment="Center"
                       Foreground="{DynamicResource TextMutedBrush}" Margin="0,0,10,0"
                       Cursor="SizeAll"/>

            <!-- Step number badge -->
            <Border Grid.Column="1" CornerRadius="4" Padding="6,2" Margin="0,0,10,0"
                    VerticalAlignment="Center"
                    Background="{DynamicResource AccentBrush}" MinWidth="24">
                <TextBlock x:Name="NumberText" Text="1" FontSize="11" FontWeight="Bold"
                           Foreground="White" HorizontalAlignment="Center"/>
            </Border>

            <!-- Step info -->
            <StackPanel Grid.Column="2" VerticalAlignment="Center">
                <TextBlock x:Name="NameText" Text="Step Name" FontSize="13" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}"/>
                <TextBlock x:Name="DetailText" Text="command preview" FontSize="11"
                           Foreground="{DynamicResource TextMutedBrush}"
                           TextTrimming="CharacterEllipsis" MaxWidth="350"/>
            </StackPanel>

            <!-- Type badge -->
            <Border Grid.Column="3" CornerRadius="4" Padding="8,3" VerticalAlignment="Center">
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="Background" Value="{DynamicResource BorderBrush}"/>
                    </Style>
                </Border.Style>
                <TextBlock x:Name="TypeText" Text="Execute" FontSize="10" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextSecondaryBrush}"/>
            </Border>
        </Grid>
    </Border>
</UserControl>
